<div class="forgot-password-container">
  <div class="forgot-password-card">
    <div class="forgot-password-header">
      <h1 class="forgot-password-title">Reset Your Password</h1>
      <p class="forgot-password-subtitle" *ngIf="!emailSent">
        Enter your email address and we'll send you a link to reset your password
      </p>
      <p class="forgot-password-subtitle" *ngIf="emailSent">
        We've sent you a password reset link if an account with that email exists
      </p>
    </div>

    <div *ngIf="!emailSent">
      <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="forgot-password-form">
        <!-- Email Field -->
        <div class="form-group">
          <label for="email" class="form-label">Email Address</label>
          <div class="input-container">
            <input
              id="email"
              type="email"
              formControlName="email"
              class="form-input"
              [class.invalid]="isFieldInvalid('email')"
              placeholder="Enter your email"
              autocomplete="email"
            />
            <div class="input-icon">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/>
                <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/>
              </svg>
            </div>
          </div>
          <div class="error-message" *ngIf="isFieldInvalid('email')">
            {{ getFieldError('email') }}
          </div>
        </div>

        <!-- Send Reset Link Button -->
        <app-button
          type="submit"
          variant="primary"
          size="large"
          [disabled]="isLoading || forgotPasswordForm.invalid"
          [loading]="isLoading"
          class="reset-button"
        >
          <span *ngIf="!isLoading">Send Reset Link</span>
          <span *ngIf="isLoading">Sending...</span>
        </app-button>
      </form>
    </div>

    <div *ngIf="emailSent" class="email-sent-section">
      <div class="success-icon">
        <svg width="64" height="64" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
        </svg>
      </div>
      <h3 class="success-title">Check Your Email</h3>
      <p class="success-message">
        We've sent a password reset link to your email address. 
        Click the link in the email to reset your password.
      </p>
      <div class="email-actions">
        <app-button
          type="button"
          variant="secondary"
          size="medium"
          (click)="resendEmail()"
          class="resend-button"
        >
          Resend Email
        </app-button>
      </div>
    </div>

    <!-- Back to Login Link -->
    <div class="login-link">
      <button
        type="button"
        class="back-to-login"
        (click)="navigateToLogin()"
      >
        ← Back to Sign In
      </button>
    </div>

    <!-- Help Section -->
    <div class="help-section">
      <p class="help-text">
        Need help? Contact our 
        <a href="mailto:support@studybridge.com" class="help-link">support team</a>
      </p>
    </div>
  </div>
</div>
